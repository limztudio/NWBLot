// limztudio@gmail.com
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


#pragma once


#include <logger/common.h>


////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


NWB_LOG_BEGIN


////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


namespace __hidden_frame{
    union FrameParam{
        void* ptr[2];
        u64 u64[2];
        u32 u32[4];
        u16 u16[8];
        u8 u8[16];
    };
    class FrameData{
    public:
        inline FrameData() : m_data{ nullptr, }{}


    protected:
        FrameParam m_data;
    };
};


////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


class Frame{
public:
    Frame(void* inst);
    ~Frame();


public:
    bool init();
    bool showFrame();
    bool mainLoop();

public:
    template<typename T>
    inline T& data(){ return static_cast<T&>(m_data); }

public:
    bool startup();
    void cleanup();
    bool update(float delta);


public:
    static void print(BasicStringView<tchar> str, Log::Type type);


private:
    __hidden_frame::FrameData m_data;
};


////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


NWB_LOG_END


////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

