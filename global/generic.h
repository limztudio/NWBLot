// limztudio@gmail.com
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


#pragma once


#include "type_borrow.h"


////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


// Base class for types that should not be assigned.
class NoAssign{
public:
    NoAssign(const NoAssign&) = default;
    NoAssign() = default;

    void operator=(const NoAssign&) = delete;
};

// Base class for types that should not be copied or assigned.
class NoCopy : NoAssign{
public:
    NoCopy(const NoCopy&) = delete;
    NoCopy(NoCopy&&) = default;
    NoCopy() = default;

    NoCopy& operator=(NoCopy&&) = default;
};


////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


template<typename T, typename U>
inline T checked_cast(U u){
    static_assert(!IsSame<T, U>::value, "Unnecessary checked_cast");
    if(!u)
        return nullptr;
    T t = static_cast<T>(u);
#ifdef NWB_DEBUG
    NWB_ASSERT(t);
#endif
    return t;
}


////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

